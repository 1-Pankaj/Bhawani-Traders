<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order Status | Bhawani Traders</title>

  <!-- SEO -->
  <meta name="description" content="Track your Bhawani Traders order: live timeline, courier & AWB, items, and printable receipt. (No API — demo uses your browser storage)"/>
  <link rel="canonical" href="https://example.com/order-status.html"/>

  <!-- Open Graph -->
  <meta property="og:title" content="Order Status | Bhawani Traders"/>
  <meta property="og:description" content="Check your order status and print your receipt."/>
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="https://images.unsplash.com/photo-1586521995568-39ce5f32a5d1?q=80&w=1600&auto=format&fit=crop"/>
  <meta property="og:url" content="https://example.com/order-status.html"/>

  <!-- Fonts, Icons, Bootstrap -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>

  <style>
    :root{
      --primary-color:#1a237e;
      --secondary-color:#FFD700;
      --accent-color:#B71C1C;
      --light-color:#FFF8E1;
      --dark-color:#3E2723;
      --text-color:#333;
      --text-light:#757575;
    }
    body{font-family:'Poppins',sans-serif;color:var(--text-color);background:var(--light-color);line-height:1.6;overflow-x:hidden;}
    h1,h2,h3,h4,h5,h6{font-family:'Playfair Display',serif;font-weight:700;color:var(--dark-color);}
    .display-font{font-family:'Dancing Script',cursive;}

    /* Header */
    .header{background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.1);position:sticky;top:0;z-index:1000;}
    .navbar-brand{font-family:'Dancing Script',cursive;font-size:2rem;color:var(--primary-color)!important;}
    .nav-link{font-weight:500;color:var(--dark-color)!important;position:relative;margin:0 10px;}
    .nav-link:hover{color:var(--accent-color)!important;}
    .nav-link::after{content:"";position:absolute;width:0;height:2px;bottom:0;left:0;background:var(--accent-color);transition:width .3s ease;}
    .nav-link:hover::after{width:100%;}
    .search-box{border-radius:20px;border:1px solid #ddd;padding:5px 20px;width:100%;}
    .cart-icon{position:relative;}
    .cart-count{position:absolute;top:-10px;right:-10px;background:var(--accent-color);color:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:12px;}

    /* Loader */
    .page-loader{position:fixed;inset:0;background:var(--light-color);z-index:9999;display:flex;align-items:center;justify-content:center;transition:opacity .5s,visibility .5s;}
    .page-loader.hidden{opacity:0;visibility:hidden;}
    .loader{width:80px;height:80px;border:8px solid rgba(26,35,126,.2);border-radius:50%;border-top:8px solid var(--primary-color);animation:spin 1s linear infinite;}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Hero */
    .hero{position:relative;min-height:38vh;display:flex;align-items:center;justify-content:center;margin-top:90px;
      background:linear-gradient(rgba(26,35,126,.55),rgba(26,35,126,.55)),
      url('https://images.unsplash.com/photo-1586521995568-39ce5f32a5d1?q=80&w=1600&auto=format&fit=crop') center/cover no-repeat;}
    .hero h1{color:#fff;font-size:2.6rem;}
    .hero p{color:#fff;opacity:.95;}

    /* Breadcrumb */
    .breadcrumb-wrap{background:#fff;border-bottom:1px solid rgba(0,0,0,.06);}
    .breadcrumb{background:transparent;margin:0;padding:.75rem 0;}
    .breadcrumb .breadcrumb-item a{color:var(--primary-color);}
    .breadcrumb .breadcrumb-item.active{color:var(--text-light);}

    /* Section */
    .section{padding:60px 0;}
    .section-title{text-align:center;margin-bottom:24px;position:relative;}
    .section-title h2{font-size:2rem;margin-bottom:8px;color:var(--primary-color);}
    .section-title::after{content:"";position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);width:100px;height:3px;background:var(--accent-color);}

    /* Cards */
    .card-soft{background:#fff;border:none;border-radius:14px;box-shadow:0 6px 18px rgba(0,0,0,.08);}
    .info-row{display:flex;flex-wrap:wrap;gap:10px;}
    .pill{display:inline-block;border-radius:999px;padding:4px 10px;font-size:.8rem;font-weight:700;}
    .pill-status{background:rgba(26,35,126,.09);color:var(--primary-color);}
    .pill-paid{background:rgba(76,175,80,.12);color:#2e7d32;}
    .pill-cod{background:rgba(255,193,7,.15);color:#8a6d00;}

    /* Timeline */
    .timeline{display:flex;justify-content:space-between;position:relative;margin:22px 0;}
    .timeline::before{content:"";position:absolute;top:50%;left:0;right:0;height:4px;background:rgba(26,35,126,.15);transform:translateY(-50%);border-radius:4px;}
    .t-step{position:relative;z-index:1;text-align:center;flex:1;}
    .t-dot{width:18px;height:18px;border-radius:50%;background:rgba(26,35,126,.3);margin:0 auto 6px;border:3px solid #fff;box-shadow:0 0 0 3px rgba(26,35,126,.15);}
    .t-step.done .t-dot{background:var(--primary-color);}
    .t-step.current .t-dot{background:var(--secondary-color);}
    .t-label{font-size:.85rem;color:var(--text-light);}
    .t-date{display:block;font-size:.75rem;color:#999;}

    /* Items */
    .thumb{width:54px;height:54px;border-radius:8px;object-fit:cover;border:1px solid rgba(0,0,0,.06);}

    /* Printable */
    @media print{
      body{background:#fff;}
      header, .hero, .breadcrumb-wrap, .section:not(.print-safe), footer, .back-to-top { display:none !important; }
      #printArea{display:block !important;}
    }

    /* Animations */
    @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    .animate-fade-in-up{opacity:0;transform:translateY(30px)}
    .animate-fade-in-up.animated{animation:fadeInUp .8s ease-out forwards}

    @media(max-width:991.98px){.hero{margin-top:80px}}
    @media(max-width:767.98px){.hero{min-height:34vh}.hero h1{font-size:2rem}}
  </style>
</head>

<body>
  <!-- Loader -->
  <div class="page-loader"><div class="loader"></div></div>

  <!-- Header -->
  <header class="header">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-light py-3">
        <a class="navbar-brand" href="index.html"><span class="display-font">Bhawani</span> Traders</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav"><span class="navbar-toggler-icon"></span></button>

        <div class="collapse navbar-collapse" id="nav">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" data-toggle="dropdown">Categories</a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="categories.html">All Categories</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="groceries.html">Groceries</a>
                <a class="dropdown-item" href="household.html">Household</a>
                <a class="dropdown-item" href="personal-care.html">Personal Care</a>
                <a class="dropdown-item" href="kitchenware.html">Kitchenware</a>
                <a class="dropdown-item" href="textiles.html">Textiles</a>
                <a class="dropdown-item" href="handicrafts.html">Handicrafts</a>
                <a class="dropdown-item" href="spices.html">Spices</a>
              </div>
            </li>

            <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
            <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
            <li class="nav-item active"><a class="nav-link" href="order-status.html">Order Status</a></li>
          </ul>

          <form class="form-inline my-2 my-lg-0 mx-auto" action="search.html">
            <div class="input-group">
              <input class="form-control search-box" type="search" placeholder="Search products..." name="q"/>
              <div class="input-group-append"><button class="btn btn-outline-primary" type="submit"><i class="fas fa-search"></i></button></div>
            </div>
          </form>

          <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" href="account.html"><i class="far fa-user"></i></a></li>
            <li class="nav-item"><a class="nav-link" href="wishlist.html"><i class="far fa-heart"></i></a></li>
            <li class="nav-item cart-icon"><a class="nav-link" href="cart.html"><i class="fas fa-shopping-cart"></i><span class="cart-count">3</span></a></li>
          </ul>
        </div>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero text-center d-flex">
    <div class="container">
      <h1 class="mb-3 animate-fade-in-up">Order Status</h1>
      <p class="lead animate-fade-in-up" style="animation-delay:.12s">Track your order with Order # and email/phone. (Demo: saved in your browser)</p>
    </div>
  </section>

  <!-- Breadcrumb -->
  <div class="breadcrumb-wrap">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page">Order Status</li>
        </ol>
      </nav>
    </div>
  </div>

  <!-- Lookup -->
  <section class="section pt-4">
    <div class="container">
      <div class="section-title">
        <h2>Find Your Order</h2>
        <p>Enter your details to view live status</p>
      </div>
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <div class="card card-soft animate-fade-in-up p-4">
            <form id="lookupForm" novalidate>
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="orderId">Order Number</label>
                  <input type="text" class="form-control" id="orderId" placeholder="e.g. BT-2025-10-00123" required>
                  <div class="invalid-feedback">Order number is required.</div>
                </div>
                <div class="form-group col-md-3">
                  <label for="email">Email</label>
                  <input type="email" class="form-control" id="email" placeholder="you@example.com">
                </div>
                <div class="form-group col-md-3">
                  <label for="phone">Phone</label>
                  <input type="tel" class="form-control" id="phone" placeholder="10 digits" pattern="^\d{10}$">
                </div>
              </div>
              <div class="d-flex align-items-center">
                <button type="submit" class="btn btn-primary">Check Status</button>
                <button type="button" id="demoBtn" class="btn btn-outline-primary ml-2">Generate Sample Order</button>
              </div>
              <small class="text-muted d-block mt-2">No API: orders are read from <code>localStorage.bt_orders</code>. Use “Generate Sample Order” if you don’t have one.</small>
            </form>
            <div id="notFound" class="alert alert-warning mt-3 d-none" role="alert">
              We couldn’t find that order in this browser. Please verify the Order # and email/phone.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Results -->
  <section class="section pt-0">
    <div class="container">
      <div id="resultWrap" class="d-none">
        <!-- Overview -->
        <div class="card card-soft p-4 animate-fade-in-up">
          <div class="d-flex flex-column flex-md-row justify-content-between">
            <div class="mb-3 mb-md-0">
              <h5 class="mb-1">Order <span id="rOrderId">—</span></h5>
              <div class="info-row">
                <span class="pill pill-status" id="rStatus">—</span>
                <span class="pill pill-paid" id="rPaid">Prepaid</span>
                <span class="pill pill-cod d-none" id="rCod">COD</span>
              </div>
              <small class="text-muted d-block mt-1">Placed on <span id="rDate">—</span></small>
            </div>
            <div class="text-md-right">
              <div><strong>Total:</strong> <span id="rTotal">—</span></div>
              <div><strong>Courier:</strong> <span id="rCourier">—</span></div>
              <div><strong>AWB:</strong> <span id="rAwb">—</span></div>
              <div class="mt-2">
                <button id="printBtn" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-print mr-1"></i>Print Receipt</button>
              </div>
            </div>
          </div>

          <!-- Timeline -->
          <div class="timeline mt-3">
            <div class="t-step" data-step="PLACED">
              <div class="t-dot"></div><div class="t-label">Placed</div><small class="t-date" id="dPlaced">—</small>
            </div>
            <div class="t-step" data-step="PACKED">
              <div class="t-dot"></div><div class="t-label">Packed</div><small class="t-date" id="dPacked">—</small>
            </div>
            <div class="t-step" data-step="SHIPPED">
              <div class="t-dot"></div><div class="t-label">Shipped</div><small class="t-date" id="dShipped">—</small>
            </div>
            <div class="t-step" data-step="OUT_FOR_DELIVERY">
              <div class="t-dot"></div><div class="t-label">Out for Delivery</div><small class="t-date" id="dOfd">—</small>
            </div>
            <div class="t-step" data-step="DELIVERED">
              <div class="t-dot"></div><div class="t-label">Delivered</div><small class="t-date" id="dDelivered">—</small>
            </div>
          </div>
        </div>

        <!-- Address & Items -->
        <div class="row mt-3">
          <div class="col-lg-4 mb-3">
            <div class="card card-soft p-3 h-100">
              <h6 class="mb-2">Ship To</h6>
              <div id="rShipTo" class="text-muted small">—</div>
              <hr>
              <h6 class="mb-2">Bill To</h6>
              <div id="rBillTo" class="text-muted small">—</div>
              <hr>
              <h6 class="mb-2">Payment</h6>
              <div class="text-muted small" id="rPayment">—</div>
            </div>
          </div>
          <div class="col-lg-8 mb-3">
            <div class="card card-soft p-3 h-100">
              <h6 class="mb-2">Items</h6>
              <div class="table-responsive">
                <table class="table table-sm">
                  <thead class="thead-light">
                    <tr><th>Item</th><th>Qty</th><th>Price</th><th>Subtotal</th></tr>
                  </thead>
                  <tbody id="itemsTbody"></tbody>
                  <tfoot>
                    <tr><td colspan="3" class="text-right"><strong>Subtotal</strong></td><td id="tSubtotal">—</td></tr>
                    <tr><td colspan="3" class="text-right"><strong>Shipping</strong></td><td id="tShipping">—</td></tr>
                    <tr><td colspan="3" class="text-right"><strong>Total</strong></td><td id="tTotal">—</td></tr>
                  </tfoot>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Printable receipt -->
        <div id="printArea" class="mt-3">
          <div class="card card-soft p-3 print-safe">
            <div class="d-flex justify-content-between">
              <div>
                <h5 class="mb-1">Bhawani Traders</h5>
                <small>123, Johari Bazar, Jaipur, Rajasthan 302001</small><br/>
                <small>+91 141 256 7890 · info@bhawanitraders.com</small>
              </div>
              <div class="text-right">
                <div><strong>Order:</strong> <span id="pOrder">—</span></div>
                <div><strong>Date:</strong> <span id="pDate">—</span></div>
                <div><strong>AWB:</strong> <span id="pAwb">—</span></div>
              </div>
            </div>
            <hr>
            <div class="row small">
              <div class="col-md-6">
                <strong>Bill To</strong><br><span id="pBill">—</span>
              </div>
              <div class="col-md-6">
                <strong>Ship To</strong><br><span id="pShip">—</span>
              </div>
            </div>
            <div class="table-responsive mt-2">
              <table class="table table-sm">
                <thead class="thead-light"><tr><th>Item</th><th class="text-right">Qty</th><th class="text-right">Price</th><th class="text-right">Subtotal</th></tr></thead>
                <tbody id="pItems"></tbody>
                <tfoot>
                  <tr><td colspan="3" class="text-right"><strong>Subtotal</strong></td><td id="pSub" class="text-right">—</td></tr>
                  <tr><td colspan="3" class="text-right"><strong>Shipping</strong></td><td id="pShipAmt" class="text-right">—</td></tr>
                  <tr><td colspan="3" class="text-right"><strong>Total</strong></td><td id="pTot" class="text-right">—</td></tr>
                </tfoot>
              </table>
            </div>
            <small class="text-muted d-block">This is a computer-generated receipt.</small>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Help CTA -->
  <section class="section pt-0">
    <div class="container">
      <div class="p-4" style="background:linear-gradient(90deg, rgba(26,35,126,.95), rgba(26,35,126,.75));border-radius:14px;color:#fff;">
        <div class="row align-items-center">
          <div class="col-lg-8 mb-3 mb-lg-0">
            <h3 class="mb-1" style="color:#fff;">Need help with your order?</h3>
            <p class="mb-0">See <a href="faq.html" class="text-warning font-weight-bold">FAQs</a>, check <a href="shipping.html" class="text-warning font-weight-bold">Shipping</a>, or <a href="contact.html" class="text-warning font-weight-bold">Contact Us</a>.</p>
          </div>
          <div class="col-lg-4 text-lg-right">
            <a href="returns.html" class="btn btn-secondary" style="background:var(--secondary-color);color:var(--primary-color);border:none;">Start a Return</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer" id="contact-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 col-md-6 mb-5 mb-lg-0">
          <a href="index.html" class="footer-logo">Bhawani Traders</a>
          <div class="footer-about">
            <p>Your one-stop destination for authentic Rajasthani products and daily essentials. Serving the people of Rajasthan since 1985 with quality and integrity.</p>
          </div>
          <div class="d-flex">
            <a class="mr-2" href="#"><i class="fab fa-facebook-f"></i></a>
            <a class="mr-2" href="#"><i class="fab fa-instagram"></i></a>
            <a class="mr-2" href="#"><i class="fab fa-twitter"></i></a>
            <a class="mr-2" href="#"><i class="fab fa-pinterest-p"></i></a>
            <a class="mr-2" href="#"><i class="fab fa-youtube"></i></a>
          </div>
        </div>

        <div class="col-lg-2 col-md-3 col-sm-6 mb-5 mb-lg-0">
          <div class="footer-links">
            <h4>Shop</h4>
            <ul>
              <li><a href="products.html">All Products</a></li>
              <li><a href="groceries.html">Groceries</a></li>
              <li><a href="household.html">Household</a></li>
              <li><a href="personal-care.html">Personal Care</a></li>
              <li><a href="kitchenware.html">Kitchenware</a></li>
              <li><a href="textiles.html">Textiles</a></li>
              <li><a href="handicrafts.html">Handicrafts</a></li>
              <li><a href="spices.html">Spices</a></li>
            </ul>
          </div>
        </div>

        <div class="col-lg-2 col-md-3 col-sm-6 mb-5 mb-sm-0">
          <div class="footer-links">
            <h4>Help</h4>
            <ul>
              <li><a href="faq.html">FAQs</a></li>
              <li><a href="shipping.html">Shipping</a></li>
              <li><a href="returns.html">Returns</a></li>
              <li><a href="order-status.html">Order Status</a></li>
              <li><a href="payment.html">Payment Options</a></li>
              <li><a href="privacy.html">Privacy Policy</a></li>
              <li><a href="terms.html">Terms &amp; Conditions</a></li>
            </ul>
          </div>
        </div>

        <div class="col-lg-4 col-md-12">
          <div class="footer-contact">
            <h4>Contact Us</h4>
            <p><i class="fas fa-map-marker-alt"></i> 123, Johari Bazar, Jaipur, Rajasthan 302001</p>
            <p><i class="fas fa-phone-alt"></i> +91 141 256 7890</p>
            <p><i class="fas fa-envelope"></i> info@bhawanitraders.com</p>
            <p><i class="fas fa-clock"></i> Mon–Sat: 9:00 AM – 8:00 PM</p>
          </div>
          <div class="payment-methods">
            <img src="https://cdn.jsdelivr.net/npm/simple-icons@v3/icons/visa.svg" alt="Visa"/>
            <img src="https://cdn.jsdelivr.net/npm/simple-icons@v3/icons/mastercard.svg" alt="Mastercard"/>
            <img src="https://cdn.jsdelivr.net/npm/simple-icons@v3/icons/paypal.svg" alt="PayPal"/>
            <img src="https://cdn.jsdelivr.net/npm/simple-icons@v3/icons/americanexpress.svg" alt="American Express"/>
            <img src="https://cdn.jsdelivr.net/npm/simple-icons@v3/icons/razorpay.svg" alt="Razorpay"/>
          </div>
        </div>
      </div>
    </div>
    <div class="copyright">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-6 text-center text-md-left">
            <p>&copy; 2025 Bhawani Traders. All rights reserved.</p>
          </div>
          <div class="col-md-6 text-center text-md-right">
            <p>Designed with <i class="fas fa-heart text-danger"></i> in Rajasthan</p>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Back to Top -->
  <a href="#" class="back-to-top btn btn-primary btn-rounded shadow" style="position: fixed; bottom: 20px; right: 20px; display: none;">
    <i class="fas fa-arrow-up"></i>
  </a>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script>
    // Loader
    $(window).on('load', function(){ setTimeout(()=>$('.page-loader').addClass('hidden'), 600); });

    // Back to top
    $(window).scroll(function(){ if($(this).scrollTop()>300) $('.back-to-top').fadeIn('slow'); else $('.back-to-top').fadeOut('slow'); });
    $('.back-to-top').click(function(e){ e.preventDefault(); $('html, body').animate({scrollTop:0}, 900); });

    // Animate on scroll
    function animateOnScroll(){
      $('.animate-fade-in-up').each(function(){
        var elTop = $(this).offset().top;
        var inView = $(window).scrollTop()+$(window).height() > elTop + 100;
        if(inView) $(this).addClass('animated');
      });
    }
    animateOnScroll(); $(window).on('scroll', animateOnScroll);

    // Money format
    function inr(n){ return '₹ ' + Number(n).toLocaleString('en-IN', {minimumFractionDigits:0}); }

    // Timeline painting
    function paintTimeline(status, dates){
      const order = ['PLACED','PACKED','SHIPPED','OUT_FOR_DELIVERY','DELIVERED'];
      $('.t-step').removeClass('done current');
      const idx = Math.max(0, order.indexOf(status));
      $('.t-step').each(function(i){
        if(i < idx) $(this).addClass('done');
        if(i === idx) $(this).addClass('current');
      });
      $('#dPlaced').text(dates.PLACED || '—');
      $('#dPacked').text(dates.PACKED || '—');
      $('#dShipped').text(dates.SHIPPED || '—');
      $('#dOfd').text(dates.OUT_FOR_DELIVERY || '—');
      $('#dDelivered').text(dates.DELIVERED || '—');
    }

    // Render order
    function renderOrder(o){
      $('#resultWrap').removeClass('d-none');
      $('#rOrderId, #pOrder').text(o.id);
      $('#rDate, #pDate').text(new Date(o.created).toLocaleString());
      $('#rTotal').text(inr(o.total));
      $('#rCourier').text(o.courier || '—');
      $('#rAwb, #pAwb').text(o.awb || '—');

      $('#rStatus').text(o.status.replaceAll('_',' '));
      if((o.payment||'').toLowerCase().includes('cod')) { $('#rCod').removeClass('d-none'); $('#rPaid').addClass('d-none'); }
      else { $('#rCod').addClass('d-none'); $('#rPaid').removeClass('d-none'); }

      // Addresses
      const ship = `${o.ship.name}<br>${o.ship.address}<br>${o.ship.city} - ${o.ship.pincode}<br>${o.ship.state}, ${o.ship.country}<br>+91 ${o.ship.phone}`;
      const bill = `${o.bill.name}<br>${o.bill.address}<br>${o.bill.city} - ${o.bill.pincode}<br>${o.bill.state}, ${o.bill.country}<br>${o.bill.email}`;
      $('#rShipTo, #pShip').html(ship);
      $('#rBillTo, #pBill').html(bill);
      $('#rPayment').text(o.payment);

      // Items
      const $tb = $('#itemsTbody').empty();
      const $pb = $('#pItems').empty();
      let sub=0;
      o.items.forEach(it=>{
        const row = `<tr>
          <td><img class="thumb mr-2" src="${it.img}" alt=""><strong>${it.name}</strong></td>
          <td>${it.qty}</td>
          <td>${inr(it.price)}</td>
          <td>${inr(it.price*it.qty)}</td>
        </tr>`;
        $tb.append(row);
        $pb.append(`<tr><td>${it.name}</td><td class="text-right">${it.qty}</td><td class="text-right">${inr(it.price)}</td><td class="text-right">${inr(it.price*it.qty)}</td></tr>`);
        sub += it.price*it.qty;
      });
      $('#tSubtotal, #pSub').text(inr(sub));
      $('#tShipping, #pShipAmt').text(inr(o.shipping));
      $('#tTotal, #pTot').text(inr(o.total));

      // Timeline
      paintTimeline(o.status, o.dates);

      // Scroll into view
      $('html, body').animate({scrollTop: $('#resultWrap').offset().top - 100}, 400);
    }

    // Lookup order in localStorage
    function findOrder(id, email, phone){
      const arr = JSON.parse(localStorage.getItem('bt_orders') || '[]');
      return arr.find(o=>{
        if(o.id.toLowerCase() !== id.toLowerCase()) return false;
        if(email && (o.bill.email||'').toLowerCase() !== email.toLowerCase()) return false;
        if(phone && (o.ship.phone||'') !== phone) return false;
        return true;
      });
    }

    // Create a sample order
    function createSample(){
      const now = new Date();
      const pad = n => String(n).padStart(2,'0');
      const id = `BT-${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())}-${Math.floor(Math.random()*90000+10000)}`;

      const placed = new Date(now.getTime()- (1000*60*60*24*2));
      const packed = new Date(placed.getTime()+ (1000*60*60*8));
      const shipped = new Date(packed.getTime()+ (1000*60*60*18));
      const ofd = new Date(now.getTime()- (1000*60*60*4));

      const items = [
        {name:'Organic Rajasthani Masala', qty:2, price:149, img:'assets/product1.png'},
        {name:'Blue Pottery Vase', qty:1, price:899, img:'assets/product3.png'}
      ];
      const sub = items.reduce((s,i)=>s+i.price*i.qty,0);
      const shipping = sub>=999 ? 0 : 69;
      const total = sub + shipping;

      const order = {
        id,
        created: placed.toISOString(),
        status: 'OUT_FOR_DELIVERY',
        payment: 'Prepaid · UPI',
        courier: 'Jaipur Express Logistics',
        awb: 'JEL' + Math.floor(3020000000 + Math.random()*99999),
        bill: { name:'Priya Sharma', address:'12, Pink City Apartments, Johari Bazar', city:'Jaipur', state:'Rajasthan', country:'India', pincode:'302001', email:'priya@example.com' },
        ship: { name:'Priya Sharma', address:'12, Pink City Apartments, Johari Bazar', city:'Jaipur', state:'Rajasthan', country:'India', pincode:'302001', phone:'9898989898' },
        items, shipping, total,
        dates: {
          PLACED: placed.toLocaleString(),
          PACKED: packed.toLocaleString(),
          SHIPPED: shipped.toLocaleString(),
          OUT_FOR_DELIVERY: ofd.toLocaleString(),
          DELIVERED: ''
        }
      };
      const arr = JSON.parse(localStorage.getItem('bt_orders') || '[]');
      arr.push(order);
      localStorage.setItem('bt_orders', JSON.stringify(arr));
      return order;
    }

    // Events
    $('#demoBtn').on('click', function(){
      const o = createSample();
      $('#orderId').val(o.id);
      $('#email').val(o.bill.email);
      $('#phone').val(o.ship.phone);
      renderOrder(o);
      $('#notFound').addClass('d-none');
    });

    $('#lookupForm').on('submit', function(e){
      e.preventDefault();
      if(!this.checkValidity()){
        e.stopPropagation();
        $(this).addClass('was-validated');
        return;
      }
      $(this).removeClass('was-validated');
      const id = ($('#orderId').val()||'').trim();
      const email = ($('#email').val()||'').trim();
      const phone = ($('#phone').val()||'').trim();
      const order = findOrder(id, email, phone);
      if(!order){
        $('#resultWrap').addClass('d-none');
        $('#notFound').removeClass('d-none');
        return;
      }
      $('#notFound').addClass('d-none');
      renderOrder(order);
    });

    // Print
    $('#printBtn').on('click', function(){ window.print(); });

    // Deep link: order-status.html?order=BT-...&email=...&phone=...
    (function initFromQuery(){
      const p = new URLSearchParams(window.location.search);
      if(p.has('order')) $('#orderId').val(p.get('order'));
      if(p.has('email')) $('#email').val(p.get('email'));
      if(p.has('phone')) $('#phone').val(p.get('phone'));
      if(p.has('order')){
        $('#lookupForm').trigger('submit');
      }
    })();
  </script>
</body>
</html>
